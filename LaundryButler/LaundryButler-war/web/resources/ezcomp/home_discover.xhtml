<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

  <!-- INTERFACE -->
  <cc:interface>
  </cc:interface>

  <!-- IMPLEMENTATION -->
  <cc:implementation>
    <h:form id="cartLineItemListView" class="form">
    <div class="row">
      <ui:repeat var="current" value="#{productManagedBean.products1}" size="3">
        <div class="col-sm-4 col-xs-12">
        <div class="panel panel-default text-center">
          <div class="panel-heading">
            <h1><h:outputText value="#{current.name}"/></h1>
          </div>
          <div class="panel-body">
            <p><strong><h:outputText value="#{current.description}"/></strong></p>
          </div>
          <div class="panel-footer">
            <h3>$<h:outputText value="#{current.price}"/></h3>
            <h:commandButton type="button" class="btn btn-default" style="width:80px;" value="Add" actionListener="#{customerCartManagedBean.addProductToCart(current)}" >
                <f:ajax execute="@form"/>
              </h:commandButton>
<!--            <button class="btn btn-lg">Add to Cart</button>-->
          </div>
        </div>      
      </div>  
      </ui:repeat>
    </div>
    
    <div class="row">
      <ui:repeat var="current" value="#{productManagedBean.products2}" size="3">
        <div class="col-sm-4 col-xs-12">
        <div class="panel panel-default text-center">
          <div class="panel-heading">
            <h1><h:outputText value="#{current.name}"/></h1>
          </div>
          <div class="panel-body">
            <p><strong><h:outputText value="#{current.description}"/></strong></p>
          </div>
          <div class="panel-footer">
            <h3>$<h:outputText value="#{current.price}"/></h3>
<!--            <h4>total</h4>-->
            <button class="btn btn-lg">Add to Cart</button>
          </div>
        </div>      
      </div>  
      </ui:repeat>
    </div>
    
    <!-- Modal windows-->
      <div class="modal fade" id="myShoppingCart" role="dialog" style="padding-top:100px;">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header themeBg">
              <button type="button" class="close modal-close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title text-center">My Cart</h4>
            </div>
            <div class="modal-body">
              <ui:fragment rendered="#{!customerCartManagedBean.isCartEmpty()}">
                <ui:repeat var="item" value="#{customerCartManagedBean.cartLineItems}">
                  <p class="text-center">Your cart is not empty.</p>
                </ui:repeat>
              </ui:fragment>
              <ui:fragment rendered="#{customerCartManagedBean.isCartEmpty()}">
                <p class="text-center">Your cart is empty.</p>
              </ui:fragment>
            </div>
            <div class="modal-footer">
              <h:commandButton type="button" class="btn btn-default page_button" style="width:80px;" value="Save" actionListener="#{customerProfileManagedBean.updateCustomerProfile}" >
                <f:ajax execute="@form"/>
              </h:commandButton>
              <button type="button" class="btn btn-default" data-dismiss="modal" style="width:80px;">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </h:form>
  </cc:implementation>
</html>